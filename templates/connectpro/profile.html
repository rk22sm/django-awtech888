{% extends "connectpro/base.html" %}

{% block body_class %}auth-page{% endblock %}

{% block content %}

<div class="container mx-auto px-4 py-8 max-w-6xl">
    <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-6">
        <div class="p-6 pt-6">
            <div class="flex flex-col md:flex-row gap-6"><span
                    class="relative flex shrink-0 overflow-hidden rounded-full w-32 h-32">
                    {%if profile.profile_picture%}
                    <img src="{{profile.profile_picture.url}}" class="h-full w-full object-cover">
                    {%endif%}
                </span>
                <div class="flex-1 space-y-4">
                    <div>
                        <div class="flex items-start justify-between mb-2">
                            <div>
                                <p class="text-3xl font-blod text-muted-foreground">{{user.profile}}</p>
                            </div>
                            <div
                                class="inline-flex items-center rounded-full border bg-orange-500 px-2.5 py-0.5 text-xs font-semibold text-white focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 capitalize">
                                Plus</div>
                        </div>
                        <div class="flex flex-wrap gap-4 text-sm text-muted-foreground mt-4">
                            <div class="flex items-center text-gray-500 gap-1"><svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-map-pin w-4 h-4 text-gray-500">
                                    <path
                                        d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0">
                                    </path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>{{profile.location}}</div>
                            <div class="flex items-center text-gray-500 gap-1"><svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-mail w-4 h-4">
                                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>{{profile_user.email}}</div>
                            <div class="flex items-center text-gray-500 gap-1"><svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-calendar w-4 h-4">
                                    <path d="M8 2v4"></path>
                                    <path d="M16 2v4"></path>
                                    <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                                    <path d="M3 10h18"></path>
                                </svg>Member form {{profile.created_at}}</div>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <!-- <a href="{% url 'connectpro:edit_profile' %}"> -->
                            <button id="openEditProfile"
                                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-[#1dc9c9] text-white hover:bg-primary/90 h-10 px-4 py-2">Edit
                                Profile</button>
                        </a>
                        <a href="">
                            <button
                                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">Share
                                Profile</button>
                        </a>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="grid md:grid-cols-3 gap-6 mb-6">
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
            <div class="p-6 pt-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">Active Connections</p>
                        <p class="text-3xl font-bold">24</p>
                    </div>
                    <div class="w-12 h-12 rounded-lg bg-[#1dc9c9]/40 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-users w-5 h-5 text-primary-foreground text-[#1dc9c9]">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>

                    </div>
                </div>
            </div>
        </div>
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
            <div class="p-6 pt-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-muted-foreground text-gray-500 mb-1">Remaining Today</p>
                        <p class="text-3xl font-bold">3/5</p>
                    </div>
                    <div class="w-12 h-12 rounded-lg bg-red-500/10 text-red-500  flex items-center justify-center"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-message-square w-6 h-6 text-secondary">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg></div>
                </div>
            </div>
        </div>
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
            <div class="p-6 pt-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-muted-foreground  text-gray-500 mb-1">Profile Views</p>
                        <p class="text-3xl font-bold">127</p>
                    </div>
                    <div class="w-12 h-12 rounded-lg bg-[#1dc9c9]/10  text-[#1dc9c9] flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-briefcase w-6 h-6 text-primary">
                            <path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                            <rect width="20" height="14" x="2" y="6" rx="2"></rect>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>

    

    <div dir="ltr" data-orientation="horizontal" class="space-y-6 ">
        <div role="tablist" aria-orientation="horizontal"
            class="inline-flex h-10 items-center justify-center bg-gray-500/10 rounded-md bg-muted p-1 text-muted-foreground"
            tabindex="0" data-orientation="horizontal" style="outline: none;">
            <button type="button" role="tab" aria-selected="true" aria-controls="radix-:r0:-content-about"
                data-state="active" id="radix-:r0:-trigger-about"
                class="inline-flex items-center justify-center whitespace-nowrap  rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-white data-[state=active]:text-gray-500 data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"
                tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">About</button>

            <button type="button" role="tab" aria-selected="false" aria-controls="radix-:r0:-content-experience"
                data-state="inactive" id="radix-:r0:-trigger-experience"
                class="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-white data-[state=active]:text-gray-500 data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"
                tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">Experience</button>
            <button type="button" role="tab" aria-selected="false" aria-controls="radix-:r0:-content-skills"
                data-state="inactive" id="radix-:r0:-trigger-skills"
                class="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium  ring-offset-background transition-all data-[state=active]:bg-white data-[state=active]:text-gray-500 data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"
                tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">Skills</button>
        </div>
        <div data-state="active" data-orientation="horizontal" role="tabpanel"
            aria-labelledby="radix-:r0:-trigger-about" id="radix-:r0:-content-about" tabindex="0"
            class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
            style="animation-duration: 0s;">
            <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
                <div class="p-6 pt-6">
                    <h2 class="text-xl font-semibold mb-4">About</h2>
                    <p class="text-muted-foreground text-gray-500">{{profile.bio}}</p>
                </div>
            </div>
        </div>
        <div data-state="inactive" data-orientation="horizontal" role="tabpanel"
            aria-labelledby="radix-:r0:-trigger-experience" hidden="" id="radix-:r0:-content-experience" tabindex="0"
            class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
            <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
                <div class="p-6 pt-6">
                    <h2 class="text-xl font-semibold mb-4">Experience</h2>
                    <p class="text-muted-foreground text-gray-500">{{profile.experience}}</p>
                </div>
            </div>
        </div>
        <div data-state="inactive" data-orientation="horizontal" role="tabpanel"
            aria-labelledby="radix-:r0:-trigger-skills" hidden="" id="radix-:r0:-content-skills" tabindex="0"
            class="mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
            <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
                <div class="p-6 pt-6">
                    <h2 class="text-xl font-semibold mb-4">Skills</h2>
                    <p class="text-muted-foreground  text-gray-500">{{profile.skills}}</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="editProfileModal"
     class=" inset-0 bg-black/50 hidden flex items-center justify-center z-50">

    <div class="bg-white rounded-lg  max-w-3xl  p-6 relative">
        <button id="closeEditProfile"
                class="absolute top-3 right-3 text-gray-500">
            âœ•
        </button>

       {% include "connectpro/edit_profile.html" with form=form %}
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const tablist = document.querySelector('[role="tablist"]');
        const tabs = tablist.querySelectorAll('[role="tab"]');

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                // Deactivate all tabs
                tabs.forEach(t => {
                    t.setAttribute("aria-selected", "false");
                    t.setAttribute("data-state", "inactive");
                    t.setAttribute("tabindex", "-1");
                });

                // Activate clicked tab
                tab.setAttribute("aria-selected", "true");
                tab.setAttribute("data-state", "active");
                tab.setAttribute("tabindex", "0");

                // Optional: control tab panels
                const controlsId = tab.getAttribute("aria-controls");

                document.querySelectorAll('[role="tabpanel"]').forEach(panel => {
                    panel.hidden = true;
                });

                const activePanel = document.getElementById(controlsId);
                if (activePanel) {
                    activePanel.hidden = false;
                }
            });
        });
    });
</script>
<script>
const openBtn = document.getElementById("openEditProfile");
const closeBtn = document.getElementById("closeEditProfile");
const modal = document.getElementById("editProfileModal");

openBtn.addEventListener("click", () => {
    modal.classList.remove("hidden");
});

closeBtn.addEventListener("click", () => {
    modal.classList.add("hidden");
});

// Close when clicking outside modal
modal.addEventListener("click", (e) => {
    if (e.target === modal) {
        modal.classList.add("hidden");
    }
});
</script>

{%endblock content%}